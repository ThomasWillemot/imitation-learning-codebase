Bootstrap: docker
From: fedora:32

%environment
export LC_ALL=C

%labels
Author kkelchte
Version 0.0.1

%files
../../rosenvironment/singularity/requirements /

%post
yum clean all
yum -y update

# required for atari-py
yum -y install cmake qt-devel
yum -y install swig
yum -y install git

# required for opencv
yum -y install libXrender
yum -y install mesa-libGL

yum -y install python-pip
python3.8 -m pip install --user --upgrade pip
python3.8 -m pip install -r /requirements


# ---- CUDA ----
%files
../../rosenvironment/singularity/cuda-10.2 /usr/lib/local

# ---- CUDNN ----
# ! Make sure cudnn_7.1 is in current directory (~/vm-singularity)
%files
../../rosenvironment/singularity/cudnn-7.1 /usr/lib/local

%post
yum -y update